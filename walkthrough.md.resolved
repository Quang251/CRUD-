# üìñ CRUD Application - Complete Walkthrough

ƒê√¢y l√† h∆∞·ªõng d·∫´n chi ti·∫øt v·ªÅ CRUD (Create, Read, Update, Delete) application ƒë∆∞·ª£c x√¢y d·ª±ng b·∫±ng React. T√¥i s·∫Ω gi·∫£i th√≠ch t·ª´ng file m·ªôt theo th·ª© t·ª± t·ª´ ngo√†i v√†o trong, t·ª´ c·∫•u h√¨nh ƒë·∫øn logic nghi·ªáp v·ª•.

---

## üèóÔ∏è Ki·∫øn tr√∫c T·ªïng quan

```mermaid
graph TD
    A[package.json] -->|Config| B[public/index.html]
    B -->|Root HTML| C[src/index.js]
    C -->|Wrap Provider| D[ProductProvider]
    C -->|Render| E[App.js]
    D -->|Context| F[Home.js]
    E -->|Display| F
    F -->|Read Data| G[appData.js]
    D -->|Manage State| G
    
    style A fill:#f9f,stroke:#333
    style D fill:#bbf,stroke:#333
    style F fill:#bfb,stroke:#333
```

**Lu·ªìng d·ªØ li·ªáu:**
1. [package.json](file:///d:/CRUD/package.json) ‚Üí C·∫•u h√¨nh dependencies
2. [index.html](file:///d:/CRUD/public/index.html) ‚Üí Root HTML v·ªõi div#root
3. [index.js](file:///d:/CRUD/src/index.js) ‚Üí Entry point, wrap app v·ªõi ProductProvider
4. [App.js](file:///d:/CRUD/src/App.js) ‚Üí Component ch√≠nh, render Home
5. [Context.js](file:///d:/CRUD/src/Context.js) ‚Üí State management v·ªõi CRUD methods
6. [Home.js](file:///d:/CRUD/src/Components/Home.js) ‚Üí UI component hi·ªÉn th·ªã v√† t∆∞∆°ng t√°c
7. [appData.js](file:///d:/CRUD/src/appData.js) ‚Üí D·ªØ li·ªáu ban ƒë·∫ßu

---

## üìÑ File 1: [package.json](file:///d:/CRUD/package.json)

```json
{
  "name": "crud",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "@testing-library/jest-dom": "^5.16.5",
    "@testing-library/react": "^13.4.0",
    "@testing-library/user-event": "^13.5.0",
    "bootstrap": "^5.3.8",
    "react": "^18.2.0",
    "react-bootstrap": "^2.10.10",
    "react-dom": "^18.2.0",
    "react-scripts": "5.0.1",
    "web-vitals": "^2.1.4"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  }
}
```

### Gi·∫£i th√≠ch:

#### üì¶ Dependencies quan tr·ªçng:

| Package | M·ª•c ƒë√≠ch |
|---------|----------|
| `react` | Core library c·ªßa React |
| `react-dom` | Bridge gi·ªØa React v√† DOM |
| `react-scripts` | Scripts c·ªßa Create React App (CRA) |
| `bootstrap` | CSS framework |
| `react-bootstrap` | Bootstrap components cho React |

#### ‚öôÔ∏è Scripts:

- **`npm start`**: Ch·∫°y development server t·∫°i `http://localhost:3000`
- **`npm build`**: Build production bundle
- **`npm test`**: Ch·∫°y unit tests
- **`npm eject`**: Eject kh·ªèi CRA (kh√¥ng th·ªÉ undo!)

---

## üìÑ File 2: [public/index.html](file:///d:/CRUD/public/index.html)

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="CRUD Application using React" />
    <title>CRUD App</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
```

### Gi·∫£i th√≠ch:

#### üéØ Vai tr√≤:
- File HTML duy nh·∫•t trong ·ª©ng d·ª•ng SPA (Single Page Application)
- React s·∫Ω "chi·∫øm quy·ªÅn" `<div id="root"></div>` v√† render to√†n b·ªô app v√†o ƒë√¢y

#### üì± Meta tags:
- `viewport`: Responsive tr√™n mobile
- `theme-color`: M√†u theme bar tr√™n mobile browsers
- `description`: SEO meta description

#### ‚ö†Ô∏è Quan tr·ªçng:
```html
<div id="root"></div>
```
ƒê√¢y l√† **anchor point** - n∆°i React render to√†n b·ªô ·ª©ng d·ª•ng v√†o.

---

## üìÑ File 3: [src/index.js](file:///d:/CRUD/src/index.js)

```javascript
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import './index.css';
import 'bootstrap/dist/css/bootstrap.min.css';
import { ProductProvider } from './Context';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
    <ProductProvider>
        <React.StrictMode>
            <App />
        </React.StrictMode>
    </ProductProvider>
);
```

### Gi·∫£i th√≠ch t·ª´ng d√≤ng:

#### 1Ô∏è‚É£ Imports (D√≤ng 1-6)

```javascript
import React from 'react';                      // React core
import ReactDOM from 'react-dom/client';        // React 18 rendering API
import App from './App';                        // App component ch√≠nh
import './index.css';                           // Global CSS
import 'bootstrap/dist/css/bootstrap.min.css';  // Bootstrap styles
import { ProductProvider } from './Context';     // Context Provider
```

#### 2Ô∏è‚É£ Create Root (D√≤ng 8)

```javascript
const root = ReactDOM.createRoot(document.getElementById('root'));
```

- **React 18+ API**: `createRoot()` thay th·∫ø [render()](file:///d:/CRUD/src/Context.js#80-96) c≈©
- T√¨m element `<div id="root">` trong HTML
- T·∫°o m·ªôt React root ƒë·ªÉ render app

#### 3Ô∏è‚É£ Render App (D√≤ng 9-15)

```javascript
root.render(
    <ProductProvider>           // ‚Üê B·ªçc ngo√†i c√πng: Cung c·∫•p Context
        <React.StrictMode>      // ‚Üê Gi·ªØa: Ki·ªÉm tra l·ªói trong dev mode
            <App />             // ‚Üê Trong c√πng: Component ch√≠nh
        </React.StrictMode>
    </ProductProvider>
);
```

**C·∫•u tr√∫c l·ªìng nhau:**
```
ProductProvider (Context API - Chia s·∫ª state to√†n app)
  ‚îî‚îÄ React.StrictMode (Development checks)
      ‚îî‚îÄ App (Component ch√≠nh)
          ‚îî‚îÄ Home (CRUD UI)
```

> **üí° T·∫°i sao l·ªìng nh∆∞ v·∫≠y?**
> - [ProductProvider](file:///d:/CRUD/src/Context.js#6-97) ·ªü ngo√†i c√πng ƒë·ªÉ **T·∫§T C·∫¢** components b√™n trong ƒë·ªÅu truy c·∫≠p ƒë∆∞·ª£c Context
> - `StrictMode` gi√∫p ph√°t hi·ªán l·ªói s·ªõm trong development
> - [App](file:///d:/CRUD/src/App.js#5-13) l√† component g·ªëc ch·ª©a to√†n b·ªô UI

---

## üìÑ File 4: [src/appData.js](file:///d:/CRUD/src/appData.js)

```javascript
export const rowData = [
  {
    id: 1,
    title: 'Car',
    price: 10,
    company: "Toyota",
    info: "One of the best Car.",
    inCart: false,
    count: 1
  },
  {
    id: 2,
    title: 'Bike',
    price: 20,
    company: "Honda",
    info: "Good Bike.",
    inCart: false,
    count: 1
  },
  {
    id: 3,
    title: 'Book',
    price: 50,
    company: "Book Angecies",
    info: "Nice book to read",
    inCart: false,
    count: 1
  },
  {
    id: 4,
    title: 'Cycles',
    price: 60,
    company: "Frog",
    info: "Best for health.",
    inCart: false,
    count: 1
  }
];
```

### Gi·∫£i th√≠ch:

#### üìä C·∫•u tr√∫c d·ªØ li·ªáu:

M·ªói product object g·ªìm:

| Field | Type | M·ª•c ƒë√≠ch |
|-------|------|----------|
| [id](file:///d:/CRUD/src/Context.js#6-97) | Number | Unique identifier (kh√≥a ch√≠nh) |
| `title` | String | T√™n s·∫£n ph·∫©m |
| `price` | Number | Gi√° s·∫£n ph·∫©m |
| `company` | String | C√¥ng ty/h√£ng s·∫£n xu·∫•t |
| `info` | String | Th√¥ng tin chi ti·∫øt |
| `inCart` | Boolean | (D·ª± t√≠nh cho shopping cart feature) |
| `count` | Number | (D·ª± t√≠nh cho quantity) |

#### üéØ Vai tr√≤:

```javascript
export const rowData = [...]
```

- **Named export**: Ph·∫£i import v·ªõi `{ rowData }`
- D·ªØ li·ªáu ban ƒë·∫ßu (seed data) khi app kh·ªüi ƒë·ªông
- [Context.js](file:///d:/CRUD/src/Context.js) s·∫Ω load data n√†y v√†o `state.Alldata`

---

## üìÑ File 5: [src/Context.js](file:///d:/CRUD/src/Context.js) ‚≠ê

ƒê√¢y l√† **file quan tr·ªçng nh·∫•t** - qu·∫£n l√Ω to√†n b·ªô state v√† logic CRUD!

### üèóÔ∏è Ki·∫øn tr√∫c Context

```mermaid
graph TB
    A[ProductContext] -->|Exports| B[ProductProvider]
    A -->|Exports| C[ProductConsumer]
    B -->|Has State| D[Alldata, id, title, info, price, company]
    B -->|Has Methods| E[getRecord, onEdit, onDelete, updateValue, onSave]
    B -->|Provides| F[value object]
    F -->|Contains| D
    F -->|Contains| E
    C -->|Consumes| F
    
    style A fill:#ff9,stroke:#333
    style B fill:#9f9,stroke:#333
    style C fill:#99f,stroke:#333
```

### Ph·∫ßn 1: T·∫°o Context (D√≤ng 1-4)

```javascript
import React, { Component } from 'react';
import { rowData } from './appData';

const ProductContext = React.createContext();
```

- `React.createContext()` t·∫°o m·ªôt Context object
- Context n√†y c√≥ 2 th√†nh ph·∫ßn: Provider v√† Consumer

### Ph·∫ßn 2: ProductProvider Class (D√≤ng 6-96)

#### A. State Initialization (D√≤ng 7-15)

```javascript
state = {
    Alldata: rowData,        // üì¶ Array products (t·ª´ appData.js)
    id: "",                  // üÜî ID ƒëang edit (r·ªóng = add mode)
    title: "",               // üìù Form input: Title
    info: "",                // üìù Form input: Info
    price: "",               // üí∞ Form input: Price
    company: "",             // üè¢ Form input: Company
    updateEdit: []           // (Ch∆∞a s·ª≠ d·ª•ng)
}
```

**State c√≥ 2 nh√≥m:**
1. **Data list**: `Alldata` - danh s√°ch products
2. **Form state**: `id, title, info, price, company` - d√πng cho form th√™m/s·ª≠a

#### B. Method 1: getRecord (D√≤ng 16-19)

```javascript
getRecord = (id) => {
    const product = this.state.Alldata.find(item => item.id === id);
    return product;
}
```

**Ch·ª©c nƒÉng:** T√¨m 1 product theo ID

**How it works:**
```javascript
// Gi·∫£ s·ª≠ Alldata = [{id:1, title:"Car"}, {id:2, title:"Bike"}]
getRecord(2)  // Returns: {id:2, title:"Bike"}
```

#### C. Method 2: onEdit (D√≤ng 20-31)

```javascript
onEdit = (id) => {
    const tempProduct = this.state.Alldata;
    const index = tempProduct.indexOf(this.getRecord(id));
    const selectedProduct = tempProduct[index];
    this.setState({
        id: selectedProduct['id'],
        title: selectedProduct['title'],
        info: selectedProduct['info'],
        price: selectedProduct['price'],
        company: selectedProduct['company'],
    })
}
```

**Ch·ª©c nƒÉng:** Load d·ªØ li·ªáu product v√†o form ƒë·ªÉ edit

**Step by step:**
1. L·∫•y array `Alldata`
2. T√¨m product b·∫±ng `getRecord(id)`
3. L·∫•y index c·ªßa product trong array
4. **ƒê·ªï d·ªØ li·ªáu** t·ª´ product v√†o state (form inputs s·∫Ω hi·ªÉn th·ªã)

**V√≠ d·ª• th·ª±c t·∫ø:**
```javascript
// User click "Edit" tr√™n row c√≥ id=2 (Bike)
onEdit(2)

// State tr∆∞·ªõc:
{ id: "", title: "", info: "", ... }

// State sau:
{ 
  id: 2,
  title: "Bike",
  info: "Good Bike.",
  price: 20,
  company: "Honda"
}
// ‚Üí Form inputs gi·ªù hi·ªÉn th·ªã th√¥ng tin Bike
```

#### D. Method 3: onDelete (D√≤ng 32-37)

```javascript
onDelete = (id) => {
    const updatedProducts = this.state.Alldata.filter(item => item.id !== id);
    this.setState({
        Alldata: updatedProducts
    })
}
```

**Ch·ª©c nƒÉng:** X√≥a 1 product kh·ªèi danh s√°ch

**How it works:**
```javascript
// Tr∆∞·ªõc: Alldata = [{id:1}, {id:2}, {id:3}]
onDelete(2)
// Sau: Alldata = [{id:1}, {id:3}]  // id=2 b·ªã lo·∫°i b·ªè
```

**Gi·∫£i th√≠ch `.filter()`:**
```javascript
filter(item => item.id !== id)
// Gi·ªØ l·∫°i: t·∫•t c·∫£ items M√Ä item.id KH√ÅC id c·∫ßn x√≥a
// Lo·∫°i b·ªè: item c√≥ id === id c·∫ßn x√≥a
```

#### E. Method 4: updateValue (D√≤ng 38-42)

```javascript
updateValue = (e, field) => {
    this.setState({
        [field]: e.target.value
    })
}
```

**Ch·ª©c nƒÉng:** C·∫≠p nh·∫≠t gi√° tr·ªã khi user g√µ v√†o input

**Parameters:**
- `e`: Event object t·ª´ input
- `field`: T√™n field (`"title"`, `"info"`, `"price"`, `"company"`)

**Computed Property Name:**
```javascript
[field]: e.target.value
// ‚Üì N·∫øu field = "title"
{ title: e.target.value }

// ‚Üì N·∫øu field = "company"  
{ company: e.target.value }
```

**V√≠ d·ª• th·ª±c t·∫ø:**
```javascript
// User g√µ "Toyota" v√†o input company
<input onChange={(e) => updateValue(e, "company")} />

// ‚Üí updateValue ƒë∆∞·ª£c g·ªçi v·ªõi:
//    e.target.value = "Toyota"
//    field = "company"

// ‚Üí setState({ company: "Toyota" })
```

#### F. Method 5: onSave (D√≤ng 43-79) - QUAN TR·ªåNG NH·∫§T!

ƒê√¢y l√† method x·ª≠ l√Ω c·∫£ **Create** v√† **Update**:

```javascript
onSave = () => {
    const { id, title, info, price, company } = this.state;
    if (id) {
        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ UPDATE MODE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        const updatedProducts = this.state.Alldata.map(item =>
            item.id === id 
                ? { id, title, info, price, company, inCart: false, count: 1 }
                : item
        );
        this.setState({
            Alldata: updatedProducts,
            id: "", title: "", info: "", price: "", company: ""
        });
    } else {
        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ CREATE MODE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        const newId = this.state.Alldata.length > 0 
            ? Math.max(...this.state.Alldata.map(p => p.id)) + 1 
            : 1;
        const newProduct = {
            id: newId, title, info, price, company,
            inCart: false, count: 1
        };
        this.setState({
            Alldata: [...this.state.Alldata, newProduct],
            id: "", title: "", info: "", price: "", company: ""
        });
    }
}
```

**Logic ph√¢n nh√°nh:**

```mermaid
graph TD
    A[onSave called] --> B{state.id c√≥ gi√° tr·ªã?}
    B -->|C√≥ id| C[UPDATE MODE]
    B -->|Kh√¥ng c√≥ id| D[CREATE MODE]
    C --> E[map qua Alldata]
    E --> F[Replace item c√≥ id match]
    F --> G[Clear form]
    D --> H[T√≠nh newId = max+1]
    H --> I[T·∫°o newProduct object]
    I --> J[Th√™m v√†o Alldata]
    J --> G
```

**UPDATE MODE - Chi ti·∫øt:**

```javascript
// Khi user ƒë√£ click "Edit" ‚Üí state.id c√≥ gi√° tr·ªã
if (id) {
    const updatedProducts = this.state.Alldata.map(item =>
        item.id === id 
            ? { id, title, info, price, company, inCart: false, count: 1 }
            : item
    );
}
```

**Gi·∫£i th√≠ch `.map()`:**
```javascript
// Tr∆∞·ªõc edit: state = {id: 2, title: "Motorcycle", ...}
// Alldata = [
//   {id:1, title:"Car", ...},
//   {id:2, title:"Bike", ...},   ‚Üê S·∫Ω ƒë∆∞·ª£c replace
//   {id:3, title:"Book", ...}
// ]

map(item => 
    item.id === 2  // N·∫øu ƒë√¢y l√† item c·∫ßn edit
        ? {id:2, title:"Motorcycle", ...}  // ‚Üê Thay b·∫±ng data m·ªõi
        : item  // ‚Üê Gi·ªØ nguy√™n c√°c items kh√°c
)

// K·∫øt qu·∫£:
// [{id:1, title:"Car"}, {id:2, title:"Motorcycle"}, {id:3, title:"Book"}]
```

**CREATE MODE - Chi ti·∫øt:**

```javascript
// Khi user ch∆∞a click "Edit" ‚Üí state.id = ""
else {
    // B∆∞·ªõc 1: T√≠nh ID m·ªõi
    const newId = this.state.Alldata.length > 0 
        ? Math.max(...this.state.Alldata.map(p => p.id)) + 1 
        : 1;
    
    // B∆∞·ªõc 2: T·∫°o object m·ªõi
    const newProduct = {
        id: newId,
        title, info, price, company,  // ES6 shorthand
        inCart: false,
        count: 1
    };
    
    // B∆∞·ªõc 3: Th√™m v√†o array
    this.setState({
        Alldata: [...this.state.Alldata, newProduct]
    });
}
```

**Gi·∫£i th√≠ch t√≠nh ID m·ªõi:**
```javascript
Math.max(...this.state.Alldata.map(p => p.id)) + 1

// V√≠ d·ª•: Alldata = [{id:1}, {id:2}, {id:4}]  (id=3 ƒë√£ b·ªã x√≥a)

// B∆∞·ªõc 1: map(p => p.id)
[1, 2, 4]

// B∆∞·ªõc 2: ...array (spread)
Math.max(1, 2, 4)

// B∆∞·ªõc 3: Math.max()
4

// B∆∞·ªõc 4: +1
5  // ‚Üê newId = 5
```

**Spread operator ƒë·ªÉ th√™m item:**
```javascript
[...this.state.Alldata, newProduct]

// = [ ...oldArray, newItem ]
// = [ item1, item2, item3, newItem ]
```

#### G. render() Method (D√≤ng 80-95)

```javascript
render() {
    return (
        <div>
            <ProductContext.Provider value={{
                ...this.state,           // Spread t·∫•t c·∫£ state
                onEdit: this.onEdit,     // Method edit
                onDelete: this.onDelete, // Method delete
                updateValue: this.updateValue,  // Method update input
                onSave: this.onSave      // Method save
            }}>
                {this.props.children}    {/* Render children */}
            </ProductContext.Provider>
        </div>
    );
}
```

**Value object ƒë∆∞·ª£c truy·ªÅn xu·ªëng:**
```javascript
{
    // State:
    Alldata: [...products],
    id: "...",
    title: "...",
    info: "...",
    price: "...",
    company: "...",
    updateEdit: [],
    
    // Methods:
    onEdit: function,
    onDelete: function,
    updateValue: function,
    onSave: function
}
```

### Ph·∫ßn 3: Export (D√≤ng 98-100)

```javascript
const ProductConsumer = ProductContext.Consumer;

export { ProductContext, ProductConsumer, ProductProvider };
```

---

## üìÑ File 6: [src/App.js](file:///d:/CRUD/src/App.js)

```javascript
import React from 'react';
import './App.css';
import Home from './Components/Home';

function App() {
    return (
        <div className="App">
            <Home />
        </div>
    )
}

export default App;
```

### Gi·∫£i th√≠ch:

**Vai tr√≤:** Component g·ªëc c·ªßa ·ª©ng d·ª•ng

**C·∫•u tr√∫c ƒë∆°n gi·∫£n:**
- Import [Home](file:///d:/CRUD/src/Components/Home.js#5-57) component
- Render [Home](file:///d:/CRUD/src/Components/Home.js#5-57) b√™n trong div c√≥ class "App"
- Export ƒë·ªÉ [index.js](file:///d:/CRUD/src/index.js) c√≥ th·ªÉ import

**Trong project n√†y App.js r·∫•t ƒë∆°n gi·∫£n v√¨:**
- Kh√¥ng c√≥ routing
- Kh√¥ng c√≥ layout ph·ª©c t·∫°p
- Ch·ªâ hi·ªÉn th·ªã 1 page duy nh·∫•t (Home)

---

## üìÑ File 7: [src/Components/Home.js](file:///d:/CRUD/src/Components/Home.js) ‚≠ê

ƒê√¢y l√† **UI component ch√≠nh** - n∆°i user t∆∞∆°ng t√°c v·ªõi CRUD!

### Ph·∫ßn 1: Imports v√† Class Declaration

```javascript
import React, { Component } from 'react';
import { ProductConsumer } from '../Context';
import { Table, Button } from 'react-bootstrap';

export default class Home extends Component {
```

- Import `ProductConsumer` ƒë·ªÉ l·∫•y Context
- Import UI components t·ª´ `react-bootstrap`
- `export default class` - export ngay khi khai b√°o

### Ph·∫ßn 2: Render Method

```javascript
render() {
    return (
        <div className="container">
            <h3>CRUD Operation</h3>
            <ProductConsumer>
                {(value) => {
                    // ... JSX b√™n trong
                }}
            </ProductConsumer>
        </div>
    );
}
```

**ProductConsumer Pattern:**
```javascript
<ProductConsumer>
    {(value) => {
        // value = object t·ª´ Context Provider
        // value.Alldata = array products
        // value.onEdit = function
        // ... (t·∫•t c·∫£ state & methods)
        return <UI using value />
    }}
</ProductConsumer>
```

### Ph·∫ßn 3: Table Structure

```javascript
<Table size='sm' variant='dark' striped bordered hover>
    <tbody>
        {/* Header Row */}
        <tr>
            <th>Title</th>
            <th>Information</th>
            <th>Price</th>
            <th>Company</th>
            <th>Action</th>
        </tr>
        
        {/* Input Row - Form ƒë·ªÉ Add/Edit */}
        <tr>
            <td><input ... /></td>
            <td><input ... /></td>
            <td><input ... /></td>
            <td><input ... /></td>
            <td><Button>Save/Add</Button></td>
        </tr>
        
        {/* Data Rows - Hi·ªÉn th·ªã products */}
        {value.Alldata.map(product => (
            <tr key={product.id}>
                <td>...</td>
                <td>...</td>
                <td>...</td>
                <td>...</td>
                <td>
                    <Button onClick={onEdit}>Edit</Button>
                    <Button onClick={onDelete}>Delete</Button>
                </td>
            </tr>
        ))}
    </tbody>
</Table>
```

### Ph·∫ßn 4: Input Row - Form (Chi ti·∫øt)

```javascript
<tr>
    <td>
        <input 
            type="text" 
            value={value.title}                    // Gi√° tr·ªã t·ª´ Context state
            onChange={(e) => {                      // Khi user g√µ
                value.updateValue(e, "title")       // G·ªçi method update
            }} 
        />
    </td>
    <td>
        <input 
            type="text" 
            value={value.info} 
            onChange={(e) => { value.updateValue(e, "info") }} 
        />
    </td>
    <td>
        <input 
            type="text" 
            value={value.price} 
            onChange={(e) => { value.updateValue(e, "price") }} 
        />
    </td>
    <td>
        <input 
            type="text" 
            value={value.company} 
            onChange={(e) => { value.updateValue(e, "company") }} 
        />
    </td>
    <td>
        <Button 
            size='sm' 
            onClick={() => {value.onSave()}}
        >
            {value.id ? "Save" : "Add New Row"}    // Conditional text
        </Button>
    </td>
</tr>
```

**Controlled Components:**
```javascript
value={value.title}                         // React controls value
onChange={(e) => value.updateValue(e)}      // Update state on change
```

**Lu·ªìng ho·∫°t ƒë·ªông:**
1. Input hi·ªÉn th·ªã gi√° tr·ªã t·ª´ `value.title` (Context state)
2. User g√µ v√†o input ‚Üí trigger `onChange`
3. `updateValue(e, "title")` ƒë∆∞·ª£c g·ªçi
4. Context update `state.title`
5. Re-render ‚Üí input hi·ªÉn th·ªã gi√° tr·ªã m·ªõi

**Button logic:**
```javascript
{value.id ? "Save" : "Add New Row"}

// N·∫øu value.id c√≥ gi√° tr·ªã ‚Üí ƒëang edit ‚Üí "Save"
// N·∫øu value.id r·ªóng ‚Üí ƒëang add ‚Üí "Add New Row"
```

### Ph·∫ßn 5: Data Rows - Display Products

```javascript
{value.Alldata.map(product => {
    return (
        <tr key={product.id}>
            <td>{product.title}</td>
            <td>{product.info}</td>
            <td>{product.price}</td>
            <td>{product.company}</td>
            <td>
                <Button 
                    size='sm' 
                    variant='primary' 
                    onClick={() => {
                        value.onEdit && value.onEdit(product.id)
                    }}
                >
                    Edit
                </Button>
                {' | '}
                <Button 
                    size='sm' 
                    variant='danger' 
                    onClick={() => {
                        value.onDelete && value.onDelete(product.id)
                    }}
                >
                    Delete
                </Button>
            </td>
        </tr>
    )
})}
```

**Array mapping:**
```javascript
value.Alldata.map(product => <tr>...</tr>)

// T·∫°o 1 table row cho m·ªói product
// key={product.id} - Required b·ªüi React ƒë·ªÉ track elements
```

**Event handlers:**
```javascript
onClick={() => { value.onEdit && value.onEdit(product.id) }}

// Short-circuit evaluation:
// N·∫øu value.onEdit t·ªìn t·∫°i ‚Üí g·ªçi value.onEdit(product.id)
// N·∫øu kh√¥ng ‚Üí kh√¥ng l√†m g√¨ (tr√°nh error)
```

---

## üîÑ Lu·ªìng ho·∫°t ƒë·ªông CRUD - V√≠ d·ª• c·ª• th·ªÉ

### ‚úÖ 1. READ (Hi·ªÉn th·ªã danh s√°ch)

```mermaid
sequenceDiagram
    participant U as User
    participant H as Home.js
    participant C as Context
    participant D as appData
    
    U->>H: M·ªü app
    H->>C: Request value
    C->>D: Load rowData
    D-->>C: Return initial data
    C-->>H: Provide value.Alldata
    H->>U: Render table v·ªõi data
```

**Code flow:**
```javascript
// 1. Context load data
state = { Alldata: rowData }  // From appData.js

// 2. Home.js map data
value.Alldata.map(product => <tr>{product.title}</tr>)

// 3. User th·∫•y table:
// Car | One of the best Car. | 10 | Toyota | [Edit][Delete]
// Bike | Good Bike. | 20 | Honda | [Edit][Delete]
// ...
```

### ‚ûï 2. CREATE (Th√™m m·ªõi)

```mermaid
sequenceDiagram
    participant U as User
    participant H as Home.js
    participant C as Context
    
    U->>H: G√µ "Laptop" v√†o Title input
    H->>C: updateValue(e, "title")
    C->>C: setState({title: "Laptop"})
    C-->>H: Re-render v·ªõi value.title = "Laptop"
    
    U->>H: G√µ th√¥ng tin kh√°c (info, price, company)
    H->>C: updateValue cho t·ª´ng field
    
    U->>H: Click "Add New Row"
    H->>C: onSave()
    C->>C: newId = max(ids) + 1
    C->>C: newProduct = {id:5, title:"Laptop",...}
    C->>C: Alldata = [...Alldata, newProduct]
    C->>C: Clear form (id="", title=""...)
    C-->>H: Re-render v·ªõi Alldata m·ªõi
    H->>U: Hi·ªÉn th·ªã row "Laptop" m·ªõi
```

**Code flow chi ti·∫øt:**

```javascript
// Step 1: User g√µ "Laptop"
<input value={value.title} onChange={(e) => updateValue(e, "title")} />
// ‚Üí updateValue(e, "title") called
// ‚Üí setState({ title: "Laptop" })

// Step 2: User g√µ c√°c field kh√°c t∆∞∆°ng t·ª±

// Step 3: User click "Add New Row"
<Button onClick={() => onSave()}>Add New Row</Button>

// Step 4: Inside onSave() - CREATE branch
const newId = Math.max(...[1,2,3,4]) + 1  // = 5
const newProduct = {
    id: 5,
    title: "Laptop",      // T·ª´ state
    info: "Gaming laptop",
    price: 1500,
    company: "Dell",
    inCart: false,
    count: 1
}
setState({
    Alldata: [...oldData, newProduct],  // Th√™m v√†o cu·ªëi
    id: "", title: "", ...  // Clear form
})

// Step 5: Re-render
// Table gi·ªù c√≥ 5 rows thay v√¨ 4
```

### ‚úèÔ∏è 3. UPDATE (Ch·ªânh s·ª≠a)

```mermaid
sequenceDiagram
    participant U as User
    participant H as Home.js
    participant C as Context
    
    U->>H: Click "Edit" tr√™n row "Bike" (id=2)
    H->>C: onEdit(2)
    C->>C: product = getRecord(2)
    C->>C: setState({id:2, title:"Bike", ...})
    C-->>H: Re-render v·ªõi form filled
    H->>U: Input hi·ªÉn th·ªã "Bike", "Good Bike."...
    
    U->>H: S·ª≠a "Bike" ‚Üí "Motorcycle"
    H->>C: updateValue(e, "title")
    C->>C: setState({title: "Motorcycle"})
    
    U->>H: Click "Save" 
    H->>C: onSave()
    C->>C: map Alldata, replace id=2
    C->>C: Clear form
    C-->>H: Re-render v·ªõi data updated
    H->>U: Row hi·ªÉn th·ªã "Motorcycle"
```

**Code flow chi ti·∫øt:**

```javascript
// Step 1: User click Edit
<Button onClick={() => value.onEdit(2)}>Edit</Button>

// Step 2: Inside onEdit(2)
const product = getRecord(2)  // = {id:2, title:"Bike", ...}
setState({
    id: 2,
    title: "Bike",
    info: "Good Bike.",
    price: 20,
    company: "Honda"
})

// Step 3: Form inputs auto-fill
<input value={value.title} />  // Shows "Bike"
<input value={value.info} />   // Shows "Good Bike."
// Button text: {value.id ? "Save" : "Add"} ‚Üí "Save"

// Step 4: User s·ª≠a "Bike" ‚Üí "Motorcycle"
// updateValue ƒë∆∞·ª£c g·ªçi ‚Üí state.title = "Motorcycle"

// Step 5: User click "Save"
<Button onClick={() => onSave()}>Save</Button>

// Step 6: Inside onSave() - UPDATE branch
const updatedProducts = Alldata.map(item =>
    item.id === 2  // T√¨m item c·∫ßn update
        ? { id: 2, title: "Motorcycle", info: "Good Bike.", ... }
        : item       // Gi·ªØ nguy√™n c√°c items kh√°c
)
setState({
    Alldata: updatedProducts,
    id: "", title: "", ...  // Clear form
})

// Step 7: Re-render
// Row id=2 gi·ªù hi·ªÉn th·ªã "Motorcycle"
```

### üóëÔ∏è 4. DELETE (X√≥a)

```mermaid
sequenceDiagram
    participant U as User
    participant H as Home.js
    participant C as Context
    
    U->>H: Click "Delete" tr√™n row "Book" (id=3)
    H->>C: onDelete(3)
    C->>C: filter Alldata (keep items !== 3)
    C->>C: setState({Alldata: filtered})
    C-->>H: Re-render
    H->>U: Row "Book" bi·∫øn m·∫•t
```

**Code flow chi ti·∫øt:**

```javascript
// Step 1: User click Delete
<Button onClick={() => value.onDelete(3)}>Delete</Button>

// Step 2: Inside onDelete(3)
const updatedProducts = Alldata.filter(item => item.id !== 3)

// Before: [{id:1}, {id:2}, {id:3}, {id:4}]
// After:  [{id:1}, {id:2}, {id:4}]  // id=3 removed

setState({ Alldata: updatedProducts })

// Step 3: Re-render
// Table gi·ªù ch·ªâ c√≤n 3 rows
```

---

## üéØ T·ªïng k·∫øt: Data Flow trong to√†n b·ªô app

```mermaid
graph LR
    A[appData.js] -->|Initial data| B[Context - state.Alldata]
    B -->|Provide value| C[Home.js - ProductConsumer]
    C -->|Display| D[User sees table]
    D -->|Click Edit button| E[Context.onEdit]
    E -->|Update state| B
    B -->|Re-render| C
    D -->|Type in input| F[Context.updateValue]
    F -->|Update state| B
    D -->|Click Save| G[Context.onSave]
    G -->|Update Alldata| B
    D -->|Click Delete| H[Context.onDelete]
    H -->|Filter Alldata| B
    
    style B fill:#9f9,stroke:#333,stroke-width:3px
    style C fill:#99f,stroke:#333,stroke-width:2px
```

---

## üìù Key Concepts Summary

### 1. React Context API
- **Provider**: Cung c·∫•p data (Context.js)
- **Consumer**: Ti√™u th·ª• data (Home.js)
- **Tr√°nh prop drilling**: Kh√¥ng c·∫ßn pass props qua nhi·ªÅu levels

### 2. Controlled Components
```javascript
<input 
    value={state.title}           // React controls value
    onChange={updateValue}        // Update state on change
/>
```

### 3. State Management
- State t·∫≠p trung t·∫°i Context
- Methods ƒë·ªÉ modify state (onEdit, onSave, onDelete)
- Components ch·ªâ trigger methods, kh√¥ng modify tr·ª±c ti·∫øp

### 4. Array Methods
- **`.map()`**: Transform array ‚Üí D√πng ƒë·ªÉ render list
- **`.filter()`**: Remove items ‚Üí D√πng cho delete
- **`.find()`**: T√¨m item ‚Üí D√πng cho getRecord

### 5. ES6 Features
- **Arrow functions**: [() => {}](file:///d:/CRUD/src/App.js#5-13)
- **Destructuring**: `const { id, title } = this.state`
- **Spread operator**: `[...array, newItem]`
- **Computed property**: `[field]: value`
- **Shorthand property**: `{ id, title }` thay v√¨ `{ id: id, title: title }`

---

## üöÄ M·ªü r·ªông trong t∆∞∆°ng lai

B·∫°n c√≥ th·ªÉ c·∫£i thi·ªán app n√†y b·∫±ng c√°ch:

1. **Validation**: Ki·ªÉm tra input tr∆∞·ªõc khi save
2. **Confirm Dialog**: X√°c nh·∫≠n tr∆∞·ªõc khi delete
3. **LocalStorage**: L∆∞u data v√†o browser
4. **API Integration**: K·∫øt n·ªëi backend th·∫≠t
5. **Styling**: C·∫£i thi·ªán UI/UX
6. **Sorting**: S·∫Øp x·∫øp table theo c·ªôt
7. **Search/Filter**: T√¨m ki·∫øm products
8. **Pagination**: Ph√¢n trang n·∫øu nhi·ªÅu data

---

**üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ hi·ªÉu h·∫øt CRUD application!**
