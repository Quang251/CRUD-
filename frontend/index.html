<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Demo Headless CRUD</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h2>Quáº£n lÃ½ User (Headless Demo)</h2>
    
    <div class="input-group">
        <input type="text" id="nameInput" placeholder="Nháº­p tÃªn user...">
        <button class="btn-add" onclick="createUser()">+ ThÃªm má»›i</button>
    </div>

    <div id="userList"></div>

    <script>
        const API_URL = 'http://localhost:3000/api/users';

        async function fetchUsers() {
            const response = await fetch(API_URL);
            const users = await response.json();
            
            const listDiv = document.getElementById('userList');
            listDiv.innerHTML = ''; 

            users.forEach(user => {
                const div = document.createElement('div');
                div.className = 'item';
                div.innerHTML = `
                    <span>ðŸ‘¤ ${user.name} <small style="color:#888">(ID: ${user.id})</small></span>
                    <div>
                        <button class="btn-edit" onclick="updateUser(${user.id})">Sá»­a</button>
                        
                        <button class="btn-delete" onclick="deleteUser(${user.id})">XÃ³a</button>
                    </div>
                `;
                listDiv.appendChild(div);
            });
        }

        async function createUser() {
            const name = document.getElementById('nameInput').value;
            if(!name) return alert("Vui lÃ²ng nháº­p tÃªn");

            await fetch(API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name: name })
            });

            document.getElementById('nameInput').value = '';
            fetchUsers();
        }

        async function updateUser(id) {
            const newName = prompt("Nháº­p tÃªn má»›i:");
            if (newName) {
                await fetch(`${API_URL}/${id}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: newName })
                });
                fetchUsers();
            }
        }

        async function deleteUser(id) {
            if(confirm("Báº¡n cháº¯c cháº¯n muá»‘n xÃ³a?")) {
                await fetch(`${API_URL}/${id}`, {
                    method: 'DELETE'
                });
                fetchUsers();
            }
        }

        fetchUsers();
    </script>
</body>
</html>